---
title: "Observable starter recipes in R-Quarto"
author: "Martin C. Arnold"
format: 
  html:
    css: styles.css 
    code-fold: false
---

## Line chart

Example from [here](https://observablehq.com/@observablehq/chart-starter-recipes).

Let's read the data into `R` and then make it available to Observable.

```{r, eval=F, echo=T}
# we can read R data like this
library(tidyverse)
R_data <- read.csv("aapl.csv")
# ... and make it available to OJS like this
ojs_define(data = R_data)
```

It is also possible to load directly using Observable. We use a chunk with header ````{OJS}` and use `FileAttachement(<path>)`. We use the `.csv` method since the we're dealing with a `.csv` file (the code below assumes that `aapl.csv` is in the same folder as the `.qmd` file).

::: {.column-margin}
Note that there's no need to include any JavaScript libraries in the document or chunk header--Quarto takes care of it!
:::

```{ojs, echo=F, eval=T}
/* in OJS we would do it like this  */
data = FileAttachment("aapl.csv")
  .csv({typed: true})
```

We may now graph the data.

```{ojs}
//| eval: true
//| fig-cap: "Apple Stock -- close prices"

Plot.plot({
  width: 600, height: 400,
  marks: [
    Plot.ruleY([40]),
    Plot.lineY(data, {x: "Date", y: "Close"})
  ]
})
```

